type Delivery @entity {
  sender: Person! @relationship(inverse: "deliveriesSent", preload: true)
  receiver: Person! @relationship(inverse: "deliveriesReceived", preload: true)
  deliver: Person! @relationship(inverse: "deliveries", preload: true)
  vehicleType: VehicleType
  paymentChannel: PaymentChannel
  deliveryType: DeliveryType
  deliveryChannel: DeliveryChannel
  collectDateTime: Time @column
  collectAddress: String @column
  collectPoint: String @column
  dropDateTime: Time @column
  dropAddress: String @column
  dropPoint: String @column
  paymentTotal: Float @column
  paymentOnDeliver: Boolean @column
  expectedDistance: String @column
  expectedCost: Float @column
  completed: Boolean @column
  smsToken: String @column
  status: String @column(index: "statusidx")
  instructions: String @column(type: "text")
}

type Person @entity {
  deliver: Boolean @column(default: false)
  email: String! @column(unique: true)
  phone: String @column
  documentNo: String @column
  avatarURL: String @column(type: "text")
  displayName: String @column
  firstName: String @column
  lastName: String @column
  nickName: String @column
  description: String @column(type: "text")
  location: String @column
  deliveries: [Delivery!]! @relationship(inverse: "deliver")
  deliveriesSent: [Delivery!]! @relationship(inverse: "sender")
  deliveriesReceived: [Delivery!]! @relationship(inverse: "receiver")
  userId: String @column #Comes from auth-api
  paymentStatus: PaymentStatus! @relationship(inverse: "person")
  paymentHistory: PaymentHistory! @relationship(inverse: "person")
}

type DeliveryType @entity {
  name: String @column
  description: String @column(type: "text")
}

type DeliveryChannel @entity {
  name: String @column
  description: String @column(type: "text")
}

type VehicleType @entity {
  name: String @column
  description: String @column(type: "text")
}

enum PaymentType {
  Credit
  Balance
  Loan
}

type PaymentChannel @entity {
  name: String @column
  description: String @column(type: "text")
}

type PaymentStatus @entity {
  person: Person! @relationship(inverse: "paymentStatus", unique: true)
  type: PaymentType! @column # Credit, Balance or Loan
  amount: Float! @column(default: 0.0)
}

type PaymentHistory @entity {
  person: Person! @relationship(inverse: "paymentHistory")
  paymentChannel: PaymentChannel
  type: PaymentType! @column # Credit, Balance or Loan
  amount: Float! @column(default: 0.0)
  concept: String @column(type: "text")
}
